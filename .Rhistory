panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
panel.border = element_rect(colour = "white", fill = NA),
strip.text.x = element_blank(),
axis.line = element_line(color = "white"),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1,color = "white"),
axis.text.y = element_text(color = "white"),
axis.title.y = element_text(color = "white"),
axis.title.x = element_text(color = "white"),
axis.ticks.y = element_line(color = "white"),
axis.ticks.x = element_line(color = "white"))
return_plot
ggsave("output/return_est_plot.png", width = 7, height = 4, bg = "transparent")
juv_plot <- ggplot(data = pred_N_jpp) +
geom_ribbon(aes(x=brood_year, ymin =ci_10,
ymax = ci_90),   fill =  "#EAAA00") +
geom_line(aes(x=brood_year, y = mean), color = "white") +
geom_errorbar(aes(x=brood_year, ymin = (obs)-(sd),
ymax = (obs)+(sd)), width = 0.1,  color = "white", alpha = 0.6) +
geom_point(aes(x=brood_year, y = (obs)),color = "white", alpha = 0.6) +
# geom_line(aes(x=brood_year, y = (obs)), color = "white" ) +
# scale_x_continuous(breaks = c(2002, 2005,2010, 2015,2020)) +
theme_classic() +
xlab("Brood Year") +
ylab("Estimated Log Juvenile Abundance") +
theme(panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.text = element_text(color = "white"),
legend.title = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
strip.background = element_blank(),
panel.border = element_rect(colour = "white", fill = NA),
strip.text.x = element_blank(),
axis.line = element_line(color = "white"),
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1,color = "white"),
axis.text.y = element_text(color = "white"),
axis.title.y = element_text(color = "white"),
axis.title.x = element_text(color = "white"),
axis.ticks.y = element_line(color = "white"),
axis.ticks.x = element_line(color = "white"))
juv_plot
## save ========
ggsave("output/juv_est_plot.png", width = 7, height = 4, bg = "transparent")
# total run =======================
fall_recruit <- read_csv("data/processed_data/yukon_fall_recruits.csv")
View(fall_recruit)
yukon_fall_harvest<-read_csv("data/processed_data/yukon_fall_harvest.csv") #%>%
View(yukon_fall_harvest)
View(fall_recruit)
fall_all <- left_join(fall_recruit, yukon_fall_harvest,spawners)
fall_all <- left_join(fall_recruit, yukon_fall_harvest)
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners)
View(fall_all)
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980)
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value")
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, color = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
View(fall_all)
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = as.facotr(id, levels = c("total_run", "spawners", "harvest")))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = factor(id, levels = c("total_run", "spawners", "harvest")))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = factor(id, levels = c("total_run", "spawner", "harvest")))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value")
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = factor(id, levels = c("total_run",  "harvest","Spawners")))
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = factor(id, levels = c("total_run", "Spawners", "harvest")))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
fall_all <- left_join(fall_recruit, yukon_fall_harvest) %>%
left_join(spawners) %>%
filter(!cal_year < 1980) %>%
gather(2:4, key = "id", value = "value") %>%
dplyr::mutate(id = case_when(id == "harvest" ~ "Harvest",
id == "Spawners" ~ "Spawners",
id == "total_run" ~ "Recruits"),
id = factor(id, levels = c("Recruits", "Spawners", "Harvest")))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
scale_fill_manual(values = c("lightblue", "blue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
scale_fill_manual(values = c("blue", "lightblue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
# legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run), linetype = 2, alpha = 0.8)+
scale_fill_manual(values = c("blue", "lightblue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)/1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "none",
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)/1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray")) +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "top",
legend.text=element_text( colour="white"),
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)/1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray"), name = " ") +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "top",
legend.text=element_text( colour="white"),
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)/1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray"), name = " ") +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "top",
legend.text=element_text( colour="white"),
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0))
ggsave( "output/afs_talk_ALL_FALL_chum.png",  bg = "transparent",
width = 9, height = 4)
## all fall on one plot =============
ggplot(data = fall_all, aes(x=cal_year, y = value/1000000, group = id, fill = id )) +
geom_line( ) +
geom_area( ) +
geom_hline(yintercept = mean(fall_recruit$total_run)/1000000, linetype = 2, alpha = 0.8, color = "white")+
scale_fill_manual(values = c("blue", "lightblue","gray"), name = " ") +
theme_classic() +
ylab("Abundance (Millions)") +
xlab("Calendar Year") +
theme( panel.background = element_blank(), #element_rect(fill = "black", colour = NA),
plot.background = element_blank(), #element_rect(fill = "black", colour = NA),
legend.background = element_blank(),
legend.position = "top",
legend.text=element_text( colour="white"),
axis.text.x=element_text(colour="white"),
axis.title.x = element_text(colour="white"),
axis.ticks.x = element_line(colour="white"),
axis.text.y=element_text(colour="white"),
axis.title.y = element_text(colour="white"),
axis.ticks.y = element_line(colour="white"),
axis.line.x.bottom=element_line(color="white"),
axis.line.y =element_line(color="white"),
panel.border = element_blank(),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank()) +
scale_x_continuous(expand = c(0, 0)) +
scale_y_continuous(expand = c(0, 0))
ggsave( "output/afs_talk_ALL_FALL_chum.png",  bg = "transparent",
width = 9, height = 4)
View(fall_all)
