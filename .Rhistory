Species_Processed <- rbind(Calanus_Final, Cristatus_Final, Neocalanus_Final)
write.csv(Species_Processed, here("data", "Species_Processed_Final.csv"))
#load zoop data
zoop <- read_csv("data/Species_Processed_Final.csv")
View(zoop)
unique(zoop$TAXA_COARSE)
#load zoop data
zoop <- read_csv("data/Species_Processed_Final.csv") %>%
filter(TAXA_COARSE == "Calanus marshallae/glacialis")
View(zoop)
#load zoop data
zoop <- read_csv("data/Species_Processed_Final.csv") %>%
filter(TAXA_COARSE == "Calanus marshallae/glacialis",
YEAR == 2018)
View(zoop)
# load 2018 lipid data
lipid <- read.csv("data/2018 Copepod data QA CP.csv") %>%
dplyr::select(Latitude, Longitude, estimated...lipid..dry.weight) %>%
dplyr::rename("proportion_lipid_dw" = estimated...lipid..dry.weight)
View(lipid)
hist(lipid$proportion_lipid_dw)
hist(log(lipid$proportion_lipid_dw))
mean_lipid <- mean(lipid$proportion_lipid_dw)
mean_lipid
mean_lipid <- mean(log(lipid$proportion_lipid_dw))
mean_lipid
# load 2018 lipid data
lipid <- read.csv("data/2018 Copepod data QA CP.csv") %>%
dplyr::select(Latitude, Longitude, estimated...lipid..dry.weight) %>%
dplyr::rename("proportion_lipid_dw" = estimated...lipid..dry.weight) %>%
filter(!is.na(proportion_lipid_dw))
hist(log(lipid$proportion_lipid_dw))
mean_lipid <- mean(log(lipid$proportion_lipid_dw))
mean_lipid
var_lipid <- var(log(lipid$proportion_lipid_dw))
sd_lipid <- sd(log(lipid$proportion_lipid_dw))
cal_lipid_draw <- rnorm(n=100, mean = mean_lipid, sd = sd_lipid)
cal_lipid_draw
ggplot(data = lipid)
ggplot(data = lipid) +
geom_hist(aes(x=log(proportion_lipid_dw))) +
geom_vline(xintercept = mean_lipid)
ggplot(data = lipid) +
geom_hist(aes(x=log(proportion_lipid_dw))) +
geom_vline(xintercept = mean_lipid)
ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw))) +
geom_vline(xintercept = mean_lipid)
ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw)), bins =20) +
geom_vline(xintercept = mean_lipid)
ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw)), bins =10) +
geom_vline(xintercept = mean_lipid)
ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw)), bins =7) +
geom_vline(xintercept = mean_lipid)
cal_lipid_draw
cal_lipid_draw <- data.frame(x= rnorm(n=100, mean = mean_lipid, sd = sd_lipid))
View(cal_lipid_draw)
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), bins =7)
p <- ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw)), bins =7) +
geom_vline(xintercept = mean_lipid)
p
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), bins =7)
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpah = 0.5, color = "red")
p <- ggplot(data = lipid) +
geom_histogram(aes(x=log(proportion_lipid_dw)), color = "black") +
geom_vline(xintercept = mean_lipid)
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpah = 0.5, color = "red")
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpha = 0.5, color = "red")
cal_lipid_draw <- data.frame(x= rnorm(n=1000, mean = mean_lipid, sd = sd_lipid))
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpha = 0.5, color = "red")
cal_lipid_draw <- data.frame(x= rnorm(n=49, mean = mean_lipid, sd = sd_lipid))
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpha = 0.5, color = "red")
mean(cal_lipid_draw$proportion_lipid_dw)
sd(cal_lipid_draw$proportion_lipid_dw)
cal_lipid_draw <- data.frame(x= rnorm(n=49, mean = mean_lipid, sd = sd_lipid))
mean(cal_lipid_draw$x)
sd(cal_lipid_draw$x)
mean_lipid
sd_lipid
p +
geom_histogram(data = cal_lipid_draw,
aes(x=x), alpha = 0.5, color = "red") +
geom_vline(xintercept = mean(cal_lipid_draw$x), color = "red")
View(zoop)
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
packages <- c("tidyverse", "readxl", "RODBC", "here", "rnaturalearth", "rnaturalearthdata", "maps", "mapdata", "marmap", "rgdal")
ipak(packages)
BASIS_Zoo_1999_2004 <- read_xlsx(here("Raw-Data", "EMA-Historical-Data", "BASIS_Zoo_1999_2004.xlsx"), col_types = c("text", "text", "text", "numeric", "text", "numeric", "date", "date", "date", "numeric", "numeric", "text", "numeric", "numeric", "text", "text", "numeric", "text", "numeric", "text", "text", "text", "text", "numeric", "numeric", "numeric", "text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
BASIS_Zoo_1999_2004 <- read_xlsx(here( "data", "Raw-Data", "EMA-Historical-Data", "BASIS_Zoo_1999_2004.xlsx"), col_types = c("text", "text", "text", "numeric", "text", "numeric", "date", "date", "date", "numeric", "numeric", "text", "numeric", "numeric", "text", "text", "numeric", "text", "numeric", "text", "text", "text", "text", "numeric", "numeric", "numeric", "text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
BASIS_Zoo_2005_2009 <- read_xlsx (here("data", "Raw-Data", "EMA-Historical-Data", "BASIS_Zoo_2005_2009.xlsx"), col_types = c("text", "text", "text", "numeric", "text", "numeric", "date", "date", "date", "numeric", "numeric", "text", "numeric", "numeric", "text", "text", "numeric", "text", "numeric", "text", "text", "text", "text", "numeric", "numeric", "numeric", "text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
BASIS_Zoo_2010_2013 <- read_xlsx (here("data", "Raw-Data", "EMA-Historical-Data", "BASIS_Zoo_2010_2013.xlsx"), col_types = c("text", "text", "text", "numeric", "text", "numeric", "date", "date", "date", "numeric", "numeric", "text", "numeric", "numeric", "text", "text", "numeric", "text", "numeric", "text", "text", "text", "text", "numeric", "numeric", "numeric", "text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
BASIS_Zoo_2014_2017 <- read_xlsx (here("data", "Raw-Data", "EMA-Historical-Data", "BASIS_Zoo_2014_2017_LonCorrected.xlsx"), col_types = c("text", "text", "text", "numeric", "text", "numeric", "date", "date", "date", "numeric", "numeric", "text", "numeric", "numeric", "text", "text", "numeric", "text", "numeric", "text", "text", "text", "text", "numeric", "numeric", "numeric", "text", "text", "numeric", "numeric", "numeric", "numeric", "numeric", "numeric"))
EMA_Combined <- rbind(BASIS_Zoo_1999_2004, BASIS_Zoo_2005_2009, BASIS_Zoo_2010_2013, BASIS_Zoo_2014_2017)
rm(BASIS_Zoo_1999_2004, BASIS_Zoo_2005_2009, BASIS_Zoo_2010_2013, BASIS_Zoo_2014_2017)
EMA_Combined_Recode <-  EMA_Combined
EMA_Combined_Recode <- separate(EMA_Combined_Recode, HaulDate, c("YEAR", "MONTH", "DAY"), sep="-")
EMA_Combined_Recode <- separate(EMA_Combined_Recode, HaulDate, c("YEAR", "MONTH", "DAY"), sep="-")
View(EMA_Combined)
View(EMA_Combined_Recode)
EMA_Combined_Recode$YEAR <- NULL
EMA_Combined_Recode <- rename(EMA_Combined_Recode, YEAR = Year)
#Extract Cruise code
EMA_Combined_Recode$CRUISE <- substring (EMA_Combined_Recode$StationID, 5,6)
EMA_Combined_Recode$CRUISE_ID <- substring (EMA_Combined_Recode$StationID, 7,8)
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "01"] <- "SS"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "02"] <- "NWE"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "03"] <- "DY"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "04"] <- "GP"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "05"] <- "EE"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "06"] <- "HE"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "07"] <- "LU"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "08"] <- "BE"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "09"] <- "AE"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "10"] <- "JC"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "11"] <- "ST"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "12"] <- "CH"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "13"] <- "SA"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "14"] <- "QU"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "15"] <- "CF"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE == "16"] <- "OS"
EMA_Combined_Recode$CRUISE_YEAR <- substring (EMA_Combined_Recode$YEAR, 3,4)
EMA_Combined_Recode <- unite(EMA_Combined_Recode, "CRUISE", CRUISE, CRUISE_YEAR, sep="")
EMA_Combined_Recode <- unite(EMA_Combined_Recode, "CRUISE", CRUISE, CRUISE_ID, sep = "-")
EMA_Combined_Recode_byCRUISE <- group_by(EMA_Combined_Recode, CRUISE)
EMA_Combined_Recode_CruiseCount <- summarise(EMA_Combined_Recode_byCRUISE, n_distinct(YEAR))
ungroup(EMA_Combined_Recode)
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="BE11-01"] <- "1BE11"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="BE12-01"] <- "1BE12"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY07-02"] <- "2OD07"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY08-06"] <- "6DY08"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY09-05"] <- "5DY09"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY10-04"] <- "4DY10"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY11-04"] <- "4DY11"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="DY12-03"] <- "3DY12"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="EE09-01"] <- "1EE09"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="EE10-01"] <- "1EE10"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="GP00-01"] <- "1GP00"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="GP99-01"] <- "1GP99"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="NWE06-01"] <- "1NW06"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS02-01"] <- "1SS02"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS03-01"] <- "1SS03"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS04-01"] <- "1SS04"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS05-01"] <- "1SS05"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS06-01"] <- "1SS06"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="SS07-01"] <- "1SS07"
EMA_Combined_Recode$CRUISE[EMA_Combined_Recode$CRUISE=="NWE17-05"] <- "NW17-05"
rm(EMA_Combined_Recode_byCRUISE, EMA_Combined_Recode_CruiseCount)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, EST_NUM_PERM3 = Abundance)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, MAX_GEAR_DEPTH = GearDepth)
EMA_Combined_Recode$EST_NUM_PERM2 <- EMA_Combined_Recode$EST_NUM_PERM3*EMA_Combined_Recode$MAX_GEAR_DEPTH
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "Bongo153"] <- "20BON_153"
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "Bongo333"] <- "60BON_333"
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "Bongo505"] <- "60BON_505"
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "Bongo80"] <- "80BON_153"
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "Juday"] <- "Juday_168"
EMA_Combined_Recode$GearCode[EMA_Combined_Recode$GearCode == "PairoVET"] <- "PairoVET_153"
EMA_Combined_Recode <- separate(EMA_Combined_Recode, GearCode, c("GEAR_NAME", "MESH"), sep = "_")
EMA_Combined_Recode <- rename(EMA_Combined_Recode, GMT_DATE_TIME_TXT = GearInTime)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, HAUL_PERFORMANCE = Quality)
EMA_Combined_Recode$HAUL_PERFORMANCE[EMA_Combined_Recode$HAUL_PERFORMANCE == "G"] <- "GOOD"
EMA_Combined_Recode$HAUL_PERFORMANCE[EMA_Combined_Recode$HAUL_PERFORMANCE == "Q"] <- "QUEST"
EMA_Combined_Recode <- rename(EMA_Combined_Recode, LAT = GearInLatitude)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, LON = GearInLongitude)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, SEX_NAME = Sex)
EMA_Combined_Recode$SEX_NAME[EMA_Combined_Recode$SEX_NAME == "M"] <- "MALE"
EMA_Combined_Recode$SEX_NAME[EMA_Combined_Recode$SEX_NAME == "F"] <- "FEMALE"
EMA_Combined_Recode$SEX_NAME[EMA_Combined_Recode$SEX_NAME == "U"] <- "NOT DETERMINED"
EMA_Combined_Recode <- rename(EMA_Combined_Recode, SIZE_NAME = Size)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, STAGE_NAME = StageCode)
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "A"] <- "ADULT"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "A & J"] <- "A + J (ADULT/JUVENILE)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "adult"] <- "ADULT"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Adult"] <- "ADULT"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1"] <- "C - 1 (COPEPODITE I)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1-2"] <- "C-1 TO C-2"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1-3"] <- "C-1 TO C-3"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1-4"] <- "C-1 TO C-4"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1-5"] <- "C-1 TO C-5"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C1-C4"] <- "C-1 TO C-4"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C2"] <- "C - 2 (COPEPODITE II)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C2-C3"] <- "C-2 TO C-3"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C2-C5"] <- "C-2 TO C-5"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C3"] <- "C - 3 (COPEPODITE III)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C3-C4"] <- "C-3 TO C-4"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C3-C5"] <- "C-3 TO C-5"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C4"] <- "C - 4 (COPEPODITE IV)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C4-C5"] <- "C-4 TO C-5"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C4-C6"] <- "C-4 TO C-6"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C5"] <- "C - 5 (COPEPODITE V)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "C6"] <- "ADULT"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "calyptopis"] <- "CALYPTOPIS (STAGE NOT DETERMINED)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "calyptopis 1"] <- "CALYPTOPIS (STAGE NOT DETERMINED)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "calyptopis 2"] <- "CALYPTOPIS (STAGE NOT DETERMINED)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "calyptopis 3"] <- "CALYPTOPIS (STAGE NOT DETERMINED)"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "cypris"] <- "CYPRIS"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Cypris"] <- "CYPRIS"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "egg"] <- "EGG"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Egg"] <- "EGG"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "furcilia"] <- "FURCILIA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Furcilia"] <- "FURCILIA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "J"] <- "JUVENILE"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "juvenile"] <- "JUVENILE"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Juvenile"] <- "JUVENILE"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "larva"] <- "LARVA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Larva"] <- "LARVA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "larval"] <- "LARVA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Larval"] <- "LARVA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "medusa"] <- "MEDUSA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Medusa"] <- "MEDUSA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "megalopa"] <- "MEGALOPAE"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Megalopa"] <- "MEGALOPAE"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "nauplius"] <- "NAUPLIUS"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Nauplius"] <- "NAUPLIUS"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "ND"] <- "NOT DETERMINED"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "post-larva"] <- "POST LARVA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "U"] <- "NOT DETERMINED"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "zoea"] <- "ZOEA"
EMA_Combined_Recode$STAGE_NAME[EMA_Combined_Recode$STAGE_NAME == "Zoea"] <- "ZOEA"
EMA_Combined_Recode$STATION_NAME<- substring (EMA_Combined_Recode$StationID, 9,11)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, TAXON_NAME = Current_Name)
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Acanthomysis sp."] <- "Acanthomysis spp."
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Acanthomysis stelleri"] <- "Acanthomysis stelleri (Exacanthomysis arctopacifica)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Anthoathecatae"] <- "Anthoathecata (Anthomedusae)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Cancridae"] <- "Cancridae (Brachyura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Candacia columbiae"] <- "Candacia Columbiae"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Caprellidea"] <- "Caprellidae"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Clytia gregaria"] <- "Clytia gregaria (Phialidium gregarium)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Cnidaria"] <- "Cnidarian medusae"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Corophium spp."] <- "Corophium"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Disacanthomysis dybowskii"] <- "Discanthomysis (Acanthomysis) Dybowskii"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Epilabidocera amphitrites"] <- "Epilabidocera amphitrites (E. longipedata)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Epilabidocera longipedata"] <- "Epilabidocera amphitrites (E. longipedata)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Euphausia spp."] <- "Euphausiacea"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Eurytemora pacifica"] <- "Eurytemora pacifica (E. johanseni)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Eurytemora sp."] <- "Eurytemora spp."
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Gammaridae"] <- "Gammaridea (Unidentifiable)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Gammaridea"] <- "Gammaridea (Unidentifiable)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Hippolytidae"] <- "Hippolytidae (Caridea)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Hydromedusae (Hydroidolina"] <- "Hydromedusae"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Leptothecatae"] <- "Leptothecata (Leptomedusae)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Lithodidae"] <- "Lithodidae (Anomura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Majidae"] <- "Majidae (Brachyura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Meterythrops robusta"] <- "Meterythrops robustus (M. robusta)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Mysida"] <- "Mysida (Unidentifiable)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Octopoda"] <- "Octopodiformes (Octopus) larvae"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Oithona setigera"] <- "Oithona setigera (O. spinirostris)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Oithona spinirostris"] <- "Oithona setigera (O. spinirostris)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Chionoecetes spp."] <- "Oregoniidae (Brachyura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Hyas spp."] <- "Oregoniidae (Brachyura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Oregoniidae"] <- "Oregoniidae (Brachyura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Pacifacanthomysis nephrophthalma"] <- "Pacifacanthomysis (Acanthomysis) nephrophthalma"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Paguridae"] <- "Paguridae (Anomura)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Paraeuchaeta elongata"] <- "Paraeuchaeta elongata (Euchaeta elongata)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Parasagitta elegans"] <- "Parasagitta (Sagitta) elegans"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Phoronida (actinotroch larva)"] <- "Phoronida actinotroch (larvae)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Podon leuckartii"] <- "Podon leuckarti"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Pseudoamallothrix ovata"] <- "Pseudoamallothrix (scolecithricella) ovata"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Syrrhoe"] <- "Syrrhoe spp."
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Tessarabrachion oculatus"] <- "Tessarabrachion oculatum"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Thecosomata"] <- "Thecosomata (Unidentifiable)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Themisto pacifica"] <- "Themisto pacifica (Parathemisto pacifica)"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Triconia sp."] <- "Triconia spp."
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Calanidae"] <- "Unidentified Calanids"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Calanoida"] <- "Unidentified Calanids"
EMA_Combined_Recode$TAXON_NAME[EMA_Combined_Recode$TAXON_NAME == "Xenacanthomysis pseudomacropsis"] <- "Xenoacanthomysis (Acanthomysis) pseudomacropsis"
EMA_Combined_Recode <- rename(EMA_Combined_Recode, VOLUME_FILTERED = TowVolume)
EMA_Combined_Recode <- rename(EMA_Combined_Recode, BOTTOM_DEPTH = BottomDepth)
EMA_Combined_Recode$DATA_SOURCE <- "EMA"
EMA_Combined_Recode$DIS_PERVOLM2 <- NA
EMA_Combined_Recode$DIS_PERVOLM3 <- NA
EMA_Combined_Recode$FOCI_ID <- NA
EMA_Combined_Recode$FOCI_SAMPLE_ID <- NA
EMA_Combined_Recode$GEOGRAPHIC_AREA <- NA
EMA_Combined_Recode$HAUL_ID <- NA
EMA_Combined_Recode$HAUL_NAME <- NA
EMA_Combined_Recode$MIN_GEAR_DEPTH <- NA
EMA_Combined_Recode$NET <- NA
EMA_Combined_Recode$SAMPLE_DEPTH <- NA
EMA_Combined_Recode$SEX <- NA
EMA_Combined_Recode$SPECIMEN_FORM <- NA
EMA_Combined_Recode$STAGE <- NA
EMA_Combined_Recode$TAXON_SIZE <- NA
EMA_Combined_Recode$ZOOP_COPEPOD_NAUPLII <- NA
EMA_Combined_Recode$ZOOP_EUPHAUSIID_EGG <- NA
EMA_Combined_Recode$HAUL_ID <- paste0(EMA_Combined_Recode$CRUISE," ",EMA_Combined_Recode$STATION_NAME," ", 1," ", EMA_Combined_Recode$GEAR_NAME," ", 1)
EcoDAAT_ColumnNames <- c("BOTTOM_DEPTH", "CRUISE", "DAY", "DIS_PERVOLM2", "DIS_PERVOLM3", "EST_NUM_PERM2", "EST_NUM_PERM3", "FOCI_ID", "FOCI_SAMPLE_ID", "GEAR_NAME", "GEOGRAPHIC_AREA", "GMT_DATE_TIME_TXT", "HAUL_ID", "HAUL_NAME", "HAUL_PERFORMANCE", "LAT", "LON", "MAX_GEAR_DEPTH", "MESH", "MIN_GEAR_DEPTH", "MONTH", "NET", "SAMPLE_DEPTH", "SEX", "SEX_NAME", "SIZE_NAME", "SPECIMEN_FORM", "STAGE", "STAGE_NAME", "STATION_NAME", "TAXON_NAME", "TAXON_SIZE", "VOLUME_FILTERED",  "YEAR", "ZOOP_COPEPOD_NAUPLII", "ZOOP_EUPHAUSIID_EGG", "DATA_SOURCE")
EMA_Combined_Recode <- EMA_Combined_Recode[, EcoDAAT_ColumnNames]
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read.csv("data/AllZoopRaw.csv") %>%
filter(zoopdata, CRUISE!="OS17-01")
#Close database connection
#
# odbcClose(AFSC_Connect)
library(here)
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read.csv("data/AllZoopRaw.csv") %>%
filter(zoopdata, CRUISE!="OS17-01")
here()
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read_csv("data/AllZoopRaw.csv") %>%
filter(!CRUISE=="OS17-01")
# odbcClose(AFSC_Connect)
library(here)
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read_csv("data/AllZoopRaw.csv")
setwd("~/Documents/GitHub/AYK_prey")
# odbcClose(AFSC_Connect)
library(here)
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read_csv("data/AllZoopRaw.csv")
zoopdata <- read_csv(here("data/AllZoopRaw.csv"))
#Drop one cruise using the old protocol OS17 and replace with correct data
zoopdata <- read_csv(here("data/AllZoopRaw.csv")) %>%
filter(!CRUISE=="OS17-01") %>%
dplyr::select(-X)
library(here)
library(tidyverse)
library(here)
library(tidyverse)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv")
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv")
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv")
View(escapement)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
mutate(year = 1976:2011)
View(escapement)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna")))
View(escapement)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna" ~ "Weir",
TRUE ~ "Sonar")))
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna" ~ "Weir"),
TRUE ~ "Sonar"))
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna") ~ "Weir",
TRUE ~ "Sonar"))
View(escapement)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna") ~ "Weir",
TRUE ~ "Sonar")) %>%
replace(escapemenet=='', NA))
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna") ~ "Weir",
TRUE ~ "Sonar")) %>%
replace(escapemenet=='', NA)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna") ~ "Weir",
TRUE ~ "Sonar")) %>%
replace(escapement=='', NA)
View(escapement)
catch <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Catch.csv") %>%
dplyr::mutate(year = 1976:2011)
catch <- read.csv("data/Kusko_Reconstruction/Kusko_Data_V1_Catch.csv") %>%
dplyr::mutate(year = 1976:2011)
View(catch)
catch <- read.csv("data/Kusko_Reconstruction/Kusko_Data_V1_Catch.csv")
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")
View(P_yj)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
gather(1:15, key = "date", value = "proportion") %>%
View(P_yj)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
gather(1:15, key = "date", value = "proportion")
View(P_yj)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1)
library(janitor)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1)
View(P_yj)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:37)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
replace(proportion=='', NA) %>%
replace(proportion=='-', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
replace(proportion =='', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
replace(proportion =='', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
dplyr::replace(proportion =='', NA) %>%
dplyr::replace(proportion =='-', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
tidyr::replace(proportion =='', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")  %>%
replace(proportion =='', NA) %>%
replace(proportion =='-', NA)
P_yj <-  read.csv("data/Kusko_Reconstruction/P_yj_Data_V1.csv")  %>%
row_to_names(row_number = 1) %>%
slice(1:36) %>%
gather(1:15, key = "date", value = "proportion")
View(P_yj)
escapement <- read.csv("data/Kusko_Reconstruction/Kusko_DataV1_Escapement.csv") %>%
dplyr::mutate(year = 1976:2011) %>%
gather(1:9, key = "project", value = "escapement") %>%
filter(!project == "Reconstruction") %>% # not sure what this category is .. filtering for now
dplyr::mutate(type = case_when(project %in% c("Kwethluk",
"Tuluksak",
"George",
"Kogrukluk",
"Tatlawiksuk",
"Takotna") ~ "Weir",
TRUE ~ "Sonar")) %>%
replace(escapement=='', NA)
View(escapement)
