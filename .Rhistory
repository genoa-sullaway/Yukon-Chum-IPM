A = 4  # number of age classes
Y = 45 # Number of years - 1978-2022 calendar years
C = A + Y # cohorts
a_min = 3# Minimum age
a_max = 6# Max age
View(yukon_summer)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1) %>%
dplyr::rename(cal_year = "Year")  %>%
dplyr::mutate(age3=as.numeric(age3),
age4=as.numeric(age4),
age5=as.numeric(age5),
age6=as.numeric(age6)) %>%
filter(!cal_year ==2023)
x = matrix( yukon_summer)
x = as.matrix( yukon_summer)
x = as.matrix(Y, A, yukon_summer)
x = as.matrix(nrow = Y, ncol = A, yukon_summer)
x = matrix(nrow = Y, ncol = A, yukon_summer)
A = 4  # number of age classes
Y = 45 # Number of years - 1978-2022 calendar years
C = A + Y # cohorts
a_min = 3# Minimum age
a_max = 6# Max age
x = matrix(nrow = Y, ncol = A, yukon_summer)
Y
A
yukon_summer
yukon_summer[,2:5]
a_max = 6# Max age
x = matrix(nrow = Y, ncol = A, yukon_summer[,2:5])
x = as.matrix(nrow = Y, ncol = A, yukon_summer[,2:5])
View(x)
View(yukon_summer)
View(yukon_summer_sp)
cv_hb = c(0.89,0.76,0.65,0.74,0.89,0.79,0.70,0.70,0.69,0.69,
0.08,0.17,0.72,0.72,0.50,0.46,0.16,0.06,0.05,0.08,
0.10,0.09,0.19,0.12,0.15,0.07,0.16,0.09,0.07,0.25,
0.11,0.24,0.05,0.9,0.9,0.9)
cv_hb = c(0.89,0.76,0.65,0.74,0.89,0.79,0.70,0.70,0.69,0.69,
0.08,0.17,0.72,0.72,0.50,0.46,0.16,0.06,0.05,0.08,
0.10,0.09,0.19,0.12,0.15,0.07,0.16,0.09,0.07,0.25,
0.11,0.24,0.05,0.9,0.9,0.9,0.09,0.07,0.25,
0.11,0.24,0.05,0.9,0.9,0.9)
# Coefficient of variation for harvest below weir
cv_w  = c(0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.19,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.05,0.05,0.05,0.05, 0.05,0.05,0.05,0.05,0.05,0.05)
# Coefficient of variation for harvest below weir
cv_w  = c(0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.19,0.05,0.05,0.05,0.05,0.05,0.05,0.05,
0.05,0.05,0.05,0.05,0.05,0.05, 0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05,0.05)
# Coefficient of variation for weir passage
cv_ha= c(0.90,0.76,0.75,0.74,0.89,0.79,0.70,0.70,0.70,0.70,
0.71,0.70,0.73,0.72,0.50,0.46,0.26,0.22,0.20,0.25,
0.29,0.25,0.27,0.25,0.23,0.28,0.05,0.05,0.05,0.60,
0.62,0.50,0.9,0.9,0.9,0.9,0.05,0.05,0.60,
0.62,0.50,0.9,0.9,0.9,0.9)
# harvest above passage data
h.a = c(rep(0, times = Y ))
h.a
# load data ================================================
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")
View(summer_age_comp)
harvest_below <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2)
View(harvest_below)
harvest_below <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4)
View(harvest_below)
## harvest below weir
harvest_below <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)
# harvest below passage data
h.b = as.numeric(harvest_below$Harvest)
h.b
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1)
View(yukon_summer)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)
# weir passage data
w=as.numeric(harvest_escapement$Escapement)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)  %>%
filter(!Year == 2023)
View(yukon_summer_sp)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2)
View(yukon_summer_sp)
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2)
View(harvest_escapement)
# load data ================================================
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")
View(summer_age_comp)
rnorm(1,10)
rnorm(1,10)
rnorm(1,10)
sigma_y_j <- matrix(ncol = 1, nrow =3, NA)
sigma_y_j
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14)
library(rstan)
library(tidyverse)
library(here)
library(bayesplot)
library(rstanarm)
library(RNetCDF)
library(tidync)
library(lubridate)
library(readxl)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2)
View(yukon_summer)
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")
View(summer_age_comp)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
select(1:4) %>%
janitor::row_to_names(row_number = 1)
yukon_summer_sp <- yukon_summer %>%
dplyr::rename(cal_year = "Year",
spawners = "Escapement") %>%
dplyr::select(cal_year, spawners)  %>%
dplyr::mutate(cal_year = as.numeric(cal_year),
spawners = as.numeric(spawners)) %>%
left_join(summer_age_comp) %>%
gather(3:6, key = "age", value = "percent") %>%
dplyr::mutate(abundance = percent*spawners,
brood_year = case_when(age == "age3" ~ cal_year -3,
age == "age4" ~ cal_year -4,
age == "age5" ~ cal_year -5,
age == "age6" ~ cal_year -6)) %>%
dplyr::select(brood_year, age, abundance) %>%
spread(age,abundance) %>%
mutate(id = "summer")
View(yukon_summer_sp)
write_csv(yukon_summer_sp, "output/yukon_summer_broodyear.csv")
summer_brood <- read_csv("output/yukon_summer_broodyear.csv")
nByrs = length(unique(summer_brood$brood_year)) # Number of BROOD years - 1978-2022 calendar years
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN years - 1978-2022 calendar years
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1) %>%
dplyr::rename(cal_year = "Year")  %>%
dplyr::mutate(age3=as.numeric(age3),
age4=as.numeric(age4),
age5=as.numeric(age5),
age6=as.numeric(age6)) %>%
filter(!cal_year == 2023)
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN years - 1978-2022 calendar years
C = A + Y # cohorts
A = 4  # number of age classes, 3,4,5,6
C = A + Y # cohorts
# Juveniles ========================================================
juv <- read_csv("data/Juv_Index_CC_aug2023/Index2.csv") %>%
dplyr::select(Time, Estimate) %>%
rename(Year = "Time")
# Make proportion of juveniles per run ======================================
mean_prop<- read_csv("data/mean_prop_basis.csv") # see "script/explore_basis_proportions.R"
juv_prop_ayk <- expand_grid(juv, mean_prop) %>%
dplyr::mutate(juv_index = mean*Estimate) %>%
dplyr::select(Year, reporting_group, juv_index) %>%
dplyr::mutate(id = case_when(reporting_group == "Yukon_Summer" ~ 1,
reporting_group == "Yukon_Fall" ~ 2,
TRUE ~ 3)) %>%
ungroup() %>%
dplyr::select(-reporting_group) %>%
spread(id, juv_index)
juv_prop_ayk[19,2]<- colMeans(juv_prop_ayk[-19,])[2] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk[19,3]<- colMeans(juv_prop_ayk[-19,])[3] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk[19,4]<- colMeans(juv_prop_ayk[-19,])[4]
write_csv(juv_prop_ayk, "tidy_BASIS_AYK_model.csv")
# basis data ============
juv<- read_csv("data/tidy_BASIS_AYK_model.csv")
write_csv(juv_prop_ayk, "data/tidy_BASIS_AYK_model.csv")
# basis data ============
juv<- read_csv("data/tidy_BASIS_AYK_model.csv")
View(juv)
# basis data ============
juv<- read_csv("data/tidy_BASIS_AYK_model.csv") %>%
select(1,2) # yukon summer is column labeled 1, yiukon fall is 2, kusko is 3
View(juv)
juv_prop_ayk <- expand_grid(juv, mean_prop) %>%
dplyr::mutate(juv_index = mean*Estimate) %>%
dplyr::select(Year, reporting_group, juv_index) %>%
dplyr::mutate(id = case_when(reporting_group == "Yukon_Summer" ~ 1,
reporting_group == "Yukon_Fall" ~ 2,
TRUE ~ 3)) %>%
ungroup() %>%
dplyr::select(-reporting_group) %>%
spread(id, juv_index) %>%
dplyr::rename(brood_year = "id")
# Juveniles ========================================================
juv <- read_csv("data/Juv_Index_CC_aug2023/Index2.csv") %>%
dplyr::select(Time, Estimate) %>%
rename(Year = "Time")
# Make proportion of juveniles per run ======================================
mean_prop<- read_csv("data/mean_prop_basis.csv") # see "script/explore_basis_proportions.R"
juv_prop_ayk <- expand_grid(juv, mean_prop) %>%
dplyr::mutate(juv_index = mean*Estimate) %>%
dplyr::select(Year, reporting_group, juv_index) %>%
dplyr::mutate(id = case_when(reporting_group == "Yukon_Summer" ~ 1,
reporting_group == "Yukon_Fall" ~ 2,
TRUE ~ 3)) %>%
ungroup() %>%
dplyr::select(-reporting_group) %>%
spread(id, juv_index) %>%
dplyr::rename(brood_year = "id")
juv_prop_ayk[19,2]<- colMeans(juv_prop_ayk[-19,])[2] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk[19,3]<- colMeans(juv_prop_ayk[-19,])[3] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk <- expand_grid(juv, mean_prop) %>%
dplyr::mutate(juv_index = mean*Estimate) %>%
dplyr::select(Year, reporting_group, juv_index) %>%
dplyr::mutate(id = case_when(reporting_group == "Yukon_Summer" ~ 1,
reporting_group == "Yukon_Fall" ~ 2,
TRUE ~ 3)) %>%
ungroup() %>%
dplyr::select(-reporting_group) %>%
spread(id, juv_index)
View(juv_prop_ayk)
juv_prop_ayk <- expand_grid(juv, mean_prop) %>%
dplyr::mutate(juv_index = mean*Estimate) %>%
dplyr::select(Year, reporting_group, juv_index) %>%
dplyr::mutate(id = case_when(reporting_group == "Yukon_Summer" ~ 1,
reporting_group == "Yukon_Fall" ~ 2,
TRUE ~ 3)) %>%
ungroup() %>%
dplyr::select(-reporting_group) %>%
spread(id, juv_index) %>%
dplyr::rename(brood_year = "Year")
juv_prop_ayk[19,2]<- colMeans(juv_prop_ayk[-19,])[2] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk[19,3]<- colMeans(juv_prop_ayk[-19,])[3] # get means of all columns except 2020, fill that in for 2020
juv_prop_ayk[19,4]<- colMeans(juv_prop_ayk[-19,])[4]
write_csv(juv_prop_ayk, "data/tidy_BASIS_AYK_model.csv")
# basis data ============
juv<- read_csv("data/tidy_BASIS_AYK_model.csv") %>%
dplyr::select(1,2) # yukon summer is column labeled 1, yiukon fall is 2, kusko is 3
View(juv)
juv
View(juv)
summer_brood <- read_csv("output/yukon_summer_broodyear.csv")%>%
filter(!brood_year < 2002)
View(summer_brood)
yukon_summer_sp <- yukon_summer %>%
dplyr::rename(cal_year = "Year",
spawners = "Escapement") %>%
dplyr::select(cal_year, spawners)  %>%
dplyr::mutate(cal_year = as.numeric(cal_year),
spawners = as.numeric(spawners)) %>%
left_join(summer_age_comp) %>%
gather(3:6, key = "age", value = "percent") %>%
dplyr::mutate(abundance = percent*spawners,
brood_year = case_when(age == "age3" ~ cal_year -3,
age == "age4" ~ cal_year -4,
age == "age5" ~ cal_year -5,
age == "age6" ~ cal_year -6))
# this pulls in data from each run, converts calendar year to brood year and runs some QAQC plots
# this is done for Yukon - final format is abundance per brood year and age class
library(tidyverse)
library(here)
library(readxl)
# Make Spawner age comp =======
## Fall Yukon =======
# created in make_fall_yukon_age_comp.R - source from JTC report
fall_age_comp <-read_csv("data/age_comps/processed_age_comps_Fallyukon_source4.csv") %>%
dplyr::select(brood_year, age, percent) %>%
spread(age,percent)
yukon_fall<- read_csv("data/Yukon_Escapement_ADFG/Yukon_Fall_Chum_RR_JTC.csv")  %>%
rename(brood_year = "Year",
spawners = "Spawners") %>%
dplyr::select(brood_year, spawners) %>%
left_join(fall_age_comp) %>%
dplyr::mutate(age3 = abund_0.3 *spawners,
age4 = abund_0.4 *spawners,
age5 = abund_0.5 *spawners,
age6 = abund_0.6 *spawners) %>%
dplyr::select(brood_year, spawners,age3,age4,age5,age6) %>%
gather(3:6, key = "id", value = "abundance") %>%
dplyr::select(brood_year, id, abundance) %>%
spread(id, abundance) %>%
dplyr::mutate(id = "fall")
## Summer Yukon =======
# sent to me separately, by Fred west 2-22-2024
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
select(1:4) %>%
janitor::row_to_names(row_number = 1)
yukon_summer_sp <- yukon_summer %>%
dplyr::rename(cal_year = "Year",
spawners = "Escapement") %>%
dplyr::select(cal_year, spawners)  %>%
dplyr::mutate(cal_year = as.numeric(cal_year),
spawners = as.numeric(spawners)) %>%
left_join(summer_age_comp) %>%
gather(3:6, key = "age", value = "percent") %>%
dplyr::mutate(abundance = percent*spawners,
brood_year = case_when(age == "age3" ~ cal_year -3,
age == "age4" ~ cal_year -4,
age == "age5" ~ cal_year -5,
age == "age6" ~ cal_year -6))
View(yukon_summer_sp)
# load salmon data ================================================
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")  %>%
filter(!cal_year == 2023,
!cal_year < 2005)
nByrs = length(unique(summer_brood$brood_year)) # Number of BROOD years - 1978-2022 calendar years
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN years - 1978-2022 calendar years
nByrs = length(unique(summer_brood$brood_year)) # Number of BROOD years - 1978-2022 calendar years
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN years - 1978-2022 calendar years
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1) %>%
dplyr::rename(cal_year = "Year")  %>%
dplyr::mutate(age3=as.numeric(age3),
age4=as.numeric(age4),
age5=as.numeric(age5),
age6=as.numeric(age6)) %>%
filter(!cal_year == 2023, !cal_year < 2005)
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN years - 1978-2022 calendar years
K = 1 # number of stocks
Ps = 0.5 # proportion of females - assumption, need to lit check
fs = c(1800, 2000, 2200, 2440) # fecundity - Gilk-Baumer 2009 estimate for Kusko Chum is: 2440. I added extra numbers temporarily just so that younger fish reproduce less, but will have to look up data for this more...
data_stage_j <- juv
View(data_stage_j)
juv[,2]
data_stage_j <- juv[,2]
View(data_stage_j)
nByrs
unique(summer_brood$brood_year)
View(juv)
# load salmon data ================================================
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")  %>%
filter(!cal_year < 2005)
View(summer_age_comp)
summer_brood <- read_csv("output/yukon_summer_broodyear.csv")
View(summer_brood)
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1) %>%
dplyr::rename(cal_year = "Year")  %>%
dplyr::mutate(age3=as.numeric(age3),
age4=as.numeric(age4),
age5=as.numeric(age5),
age6=as.numeric(age6)) %>%
filter(!cal_year == 2023, !cal_year < 2005)
View(yukon_summer)
data_stage_sp <- sum(yukon_summer[,2:5])# this is spawners by recruitment/calendar year, summed across age classes
data_stage_sp <- sum(yukon_summer[2:5,])# this is spawners by recruitment/calendar year, summed across age classes
data_stage_sp<-colSums(yukon_summer[,2:5])
data_stage_sp<-colSums(yukon_summer[2:5,])
yukon_summer[,2:5]
colSums(yukon_summer[,2:5])
data_stage_sp<-colSums(yukon_summer[1:nrow(.),2:5])
yukon_summer[,2]
data_stage_sp <- sum(yukon_summer[,2].yukon_summer[,3])# this is spawners by recruitment/calendar year, summed across age classes
data_stage_sp <- sum(yukon_summer[,2],yukon_summer[,3])# this is spawners by recruitment/calendar year, summed across age classes
data_stage_sp <- yukon_summer[,2]+yukon_summer[,3]+yukon_summer[,4]+yukon_summer[,5]# this is spawners by recruitment/calendar year, summed across age classes
View(data_stage_sp)
data_stage_sp$abundance <- yukon_summer[,2]+yukon_summer[,3]+yukon_summer[,4]+yukon_summer[,5]# this is spawners by recruitment/calendar year, summed across age classes
rm(data_stage_sp)
data_stage_sp$abundance <- yukon_summer[,2]+yukon_summer[,3]+yukon_summer[,4]+yukon_summer[,5]# this is spawners by recruitment/calendar year, summed across age classes
data_stage_sp <- yukon_summer[,2]+yukon_summer[,3]+yukon_summer[,4]+yukon_summer[,5]# this is spawners by recruitment/calendar year, summed across age classes
View(data_stage_sp)
colnames(data_stage_sp) <- "abundance"
View(data_stage_sp)
nByrs
nRyrs
unique(summer_brood$brood_year)
library(rstan)
library(tidyverse)
library(here)
library(bayesplot)
library(rstanarm)
# library(RNetCDF)
library(tidync)
library(lubridate)
library(readxl)
# Load data =======================================================
# see 01_make salmon data.R for salmon data tidying
# see 02_make covariates for cov data tidying
# setup inputs ==============================================================
warmups <- 2000
total_iterations <- 4000
max_treedepth <-  15
n_chains <- 1
n_cores <- 4
adapt_delta <- 0.95
# load salmon data ================================================
summer_age_comp<-read_csv("data/age_comps/processed_age_comps_summer_yukon.csv")  %>%
filter(!cal_year < 2005,
!cal_year == 2023)
summer_brood <- read_csv("output/yukon_summer_broodyear.csv")%>%
filter(!brood_year < 2002) # for now to simplify matching with juveniles
yukon_summer <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1,11:14) %>%
janitor::row_to_names(row_number = 1) %>%
dplyr::rename(cal_year = "Year")  %>%
dplyr::mutate(age3=as.numeric(age3),
age4=as.numeric(age4),
age5=as.numeric(age5),
age6=as.numeric(age6)) %>%
filter(!cal_year == 2023, !cal_year < 2005)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)  %>%
filter(!Year == 2023)
# basis data ============
juv<- read_csv("data/tidy_BASIS_AYK_model.csv") %>%
dplyr::select(1,2) # yukon summer is column labeled 1, yukon fall is 2, kusko is 3
nByrs = length(unique(summer_brood$brood_year)) # Number of BROOD years                 #- 1978-2022 calendar years
nRyrs = length(unique(yukon_summer$cal_year)) # Number of CAL/RETURN                    #years - 1978-2022 calendar years
nByrs
nRyrs
data_stage_j <- juv[,2] # juveniles from basis data, by brood year
data_stage_sp <- yukon_summer[,2]+yukon_summer[,3]+yukon_summer[,4]+yukon_summer[,5] # this is spawners by recruitment/calendar year, summed across age classes
colnames(data_stage_sp) <- "abundance"
View(data_stage_j)
View(juv)
unique(summer_brood$brood_year)
nByrs = length(unique(juv$brood_year)) # Number of BROOD years                 #- 1978-2022 calendar years
source("~/Documents/GitHub/AYK_prey/scripts/03_call_dat_stan_state_space_DATA.R", echo=TRUE)
nByrs
stage_a_cov <- read_csv("data/processed_covariates/stage_a_all.csv")
stage_b_cov <- read_csv("data/processed_covariates/stage_b_all.csv")
cov1 = as.matrix( stage_a_cov %>%
select(Year, SST_CDD_NBS))
View(cov1)
min(juv$brood_year)
cov1 = as.matrix(stage_a_cov %>%
select(Year, SST_CDD_NBS) %>%
filter(Year > (min(juv$brood_year)-1)))
View(cov1)
cov1 = as.matrix(stage_a_cov %>%
dplyr::select(Year, SST_CDD_NBS) %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023))
View(cov1)
cov2 =  as.matrix(stage_b_cov %>%
dplyr::select(Year, yukon_mean_discharge_summer) %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023))
cov1 = as.matrix(stage_a_cov %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023) %>%
dplyr::select(Year, SST_CDD_NBS))
cov2 =  as.matrix(stage_b_cov %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023) %>%
dplyr::select(Year, yukon_mean_discharge_summer))
cov1 = as.matrix(stage_a_cov %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023) %>%
dplyr::select(SST_CDD_NBS))
cov2 =  as.matrix(stage_b_cov %>%
filter(Year > (min(juv$brood_year)-1),
!Year == 2023) %>%
dplyr::select(yukon_mean_discharge_summer))
View(yukon_summer)
o_run <- as.matrix(yukon_summer[,2:5])
View(yukon_summer_sp)
View(summer_age_comp)
o_run_comp <- as.matrix(summer_age_comp[,2:5]) # proportional age comp by year
ess_age_comp <- rep(200, times = nByrs)
View(o_run_comp)
View(summer_brood)
View(summer_age_comp)
View(yukon_summer_sp)
View(yukon_summer)
View(yukon_summer)
View(yukon_summer_sp)
View(harvest_escapement)
View(data_stage_sp)
rbeta(1,1)
prob <- c(rbeta(1,1,1),
rbeta(1,1,1),
rbeta(1,1,1),
rbeta(1,1,1)) # probability of maturation for each age class... is this just mean?? should it vary by year? check/think.
prob
data_harvest <-  as.numeric(harvest_escapement$Harvest)
data_harvest
data_harvest <-  (harvest_escapement$Harvest)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)  %>%
filter(!Year == 2023)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
dplyr::rename(cal_year = "Year") %>%
janitor::row_to_names(row_number = 1)  %>%
filter(!cal_year == 2023, !cal_year < 2005)
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4)
View(harvest_escapement)
## harvest below weir
harvest_escapement <- read_excel("data/Yukon_Escapement_ADFG/S Chum RR 2023.xlsx", sheet = 2) %>%
dplyr::select(1:4) %>%
janitor::row_to_names(row_number = 1)  %>%
dplyr::rename(cal_year = "Year") %>%
filter(!cal_year == 2023, !cal_year < 2005)
View(harvest_escapement)
View(harvest_escapement)
