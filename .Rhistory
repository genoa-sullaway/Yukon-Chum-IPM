geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Cnideria Modeled Index") +
theme_classic()
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Cnideria Modeled Index") +
theme_classic()
cnideria_zoop_index <- mgcv::gam(sqrt(sum_EST_NUM_PERM3) ~ YEAR + DATA_SOURCE +
s(LAT, LON) + s(DOY),
data = mod_df_cnideriazoop, family = tw(link = "log"))
temp <- expand.grid(YEAR = c(unique(mod_df_cnideriazoop$YEAR)),
DATA_SOURCE = c("EcoDAAT"))
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE )
cnideria_pred_df$pred <-   (temp[[1]])
cnideria_pred_df$se <-    (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate( id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Cnideria Modeled Index") +
theme_classic()
View(cnideria_pred_df)
## Index Standardization for Cnideria =================
mod_df_cnideriazoop <-  cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE,YEAR, DOY,LAT,LON) %>% # sum across species
dplyr::summarise(sum_EST_NUM_PERM3 = sum(EST_NUM_PERM3))  %>%
mutate(YEAR = as.factor(YEAR),
DATA_SOURCE = as.factor(DATA_SOURCE)) %>%
data.frame()
View(mod_df_cnideriazoop)
cnideria_zoop_index <- mgcv::gam(sqrt(sum_EST_NUM_PERM3) ~ YEAR + DATA_SOURCE +
s(LAT, LON) + s(DOY),
data = mod_df_cnideriazoop, family = tw(link = "log"))
temp <- expand.grid(YEAR = c(unique(mod_df_cnideriazoop$YEAR)),
DATA_SOURCE = c("EcoDAAT"))
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE )
cnideria_pred_df$pred <-   (temp[[1]])
cnideria_pred_df$se <-    (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate( id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
View(cnideria_pred_df)
cnideria_pred_df$pred <- (temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
View(cnideria_pred_df)
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = FALSE)
cnideria_pred_df$pred <- (temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
View(cnideria_pred_df)
cnideria_pred_df$pred <- exp(temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate(id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred^2,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Cnideria Modeled Index") +
theme_classic()
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE)
cnideria_pred_df$pred <- exp(temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate(id = "Cnideria")
## Index Standardization for Cnideria =================
mod_df_cnideriazoop <-  cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE,YEAR, DOY,LAT,LON) %>% # sum across species
dplyr::summarise(sum_EST_NUM_PERM3 = sum(EST_NUM_PERM3))  %>%
mutate(YEAR = as.factor(YEAR),
DATA_SOURCE = as.factor(DATA_SOURCE)) %>%
data.frame()
cnideria_zoop_index <- mgcv::gam(sqrt(sum_EST_NUM_PERM3) ~ YEAR + DATA_SOURCE +
s(LAT, LON) + s(DOY),
data = mod_df_cnideriazoop, family = tw(link = "log"))
temp <- expand.grid(YEAR = c(unique(mod_df_cnideriazoop$YEAR)),
DATA_SOURCE = c("EcoDAAT"))
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE)
cnideria_pred_df$pred <- exp(temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate(id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Cnideria Modeled Index") +
theme_classic()
ggsave("output/cnideria_index.png")
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Log Cnideria Modeled Index") +
theme_classic()
ggsave("output/cnideria_index.png")
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ggtitle("Log Cnideria Modeled Index") +
theme_classic()
ggsave("output/cnideria_index.png")
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ylab("Log Cnideria Modeled Index") +
xlab("year") +
theme_classic()
ggsave("output/cnideria_index.png")
N_inner_cnideria<-df_contains %>%
left_join(cnideria_zoop) %>%
filter(name == "North inner shelf")
zoop_cnideria_summ <- N_inner_cnideria %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE, YEAR) %>%
dplyr::summarise(mean = mean(EST_NUM_PERM3),
n= nrow(.),
se = sd(EST_NUM_PERM3)/sqrt(n))
ggplot(data = zoop_cnideria_summ, aes(x=YEAR, y = mean,
group =DATA_SOURCE, color =DATA_SOURCE )) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = mean-se, ymax = mean+se))
# different plot large zoop =============
testC <- cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(TAXON_NAME,YEAR) %>%
dplyr::summarise(mean = mean(EST_NUM_PERM3),
n= nrow(.),
se= sd(EST_NUM_PERM3)/sqrt(n))
ggplot(data = testC, aes(x=YEAR, y = mean, group =TAXON_NAME, color =TAXON_NAME )) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = mean-se, ymax = mean+se))  +
facet_wrap(~TAXON_NAME, scales = "free")
## Index Standardization for Cnideria =================
mod_df_cnideriazoop <-  cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE,YEAR, DOY,LAT,LON) %>% # sum across species
dplyr::summarise(sum_EST_NUM_PERM3 = sum(EST_NUM_PERM3))  %>%
mutate(YEAR = as.factor(YEAR),
DATA_SOURCE = as.factor(DATA_SOURCE)) %>%
data.frame()
cnideria_zoop_index <- mgcv::gam(sqrt(sum_EST_NUM_PERM3) ~ YEAR + DATA_SOURCE +
s(LAT, LON) + s(DOY),
data = mod_df_cnideriazoop, family = tw(link = "log"))
temp <- expand.grid(YEAR = c(unique(mod_df_cnideriazoop$YEAR)),
DATA_SOURCE = c("EcoDAAT"))
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE)
cnideria_pred_df$pred <- exp(temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate(id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ylab("Log Cnideria Modeled Index") +
ggtitle("NBS Inner Shelf") +
xlab("year") +
theme_classic()
ggsave("output/cnideria_index.png")
ggsave("output/cnideria_index_inner_shelf.png")
N_inner_cnideria<-df_contains %>%
left_join(cnideria_zoop) %>%
filter(name == "North middle shelf")
zoop_cnideria_summ <- N_inner_cnideria %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE, YEAR) %>%
dplyr::summarise(mean = mean(EST_NUM_PERM3),
n= nrow(.),
se = sd(EST_NUM_PERM3)/sqrt(n))
ggplot(data = zoop_cnideria_summ, aes(x=YEAR, y = mean,
group =DATA_SOURCE, color =DATA_SOURCE )) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = mean-se, ymax = mean+se))
# different plot large zoop =============
testC <- cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(TAXON_NAME,YEAR) %>%
dplyr::summarise(mean = mean(EST_NUM_PERM3),
n= nrow(.),
se= sd(EST_NUM_PERM3)/sqrt(n))
ggplot(data = testC, aes(x=YEAR, y = mean, group =TAXON_NAME, color =TAXON_NAME )) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = mean-se, ymax = mean+se))  +
facet_wrap(~TAXON_NAME, scales = "free")
## Index Standardization for Cnideria =================
mod_df_cnideriazoop <-  cnideria_zoop %>%
filter(!YEAR <1999) %>%
group_by(DATA_SOURCE,YEAR, DOY,LAT,LON) %>% # sum across species
dplyr::summarise(sum_EST_NUM_PERM3 = sum(EST_NUM_PERM3))  %>%
mutate(YEAR = as.factor(YEAR),
DATA_SOURCE = as.factor(DATA_SOURCE)) %>%
data.frame()
cnideria_zoop_index <- mgcv::gam(sqrt(sum_EST_NUM_PERM3) ~ YEAR + DATA_SOURCE +
s(LAT, LON) + s(DOY),
data = mod_df_cnideriazoop, family = tw(link = "log"))
temp <- expand.grid(YEAR = c(unique(mod_df_cnideriazoop$YEAR)),
DATA_SOURCE = c("EcoDAAT"))
cnideria_pred_df <- cbind(temp,
data.frame(LAT = mean(mod_df_cnideriazoop$LAT),#currently using M2, survey mean: rep(mean(scale_dat$LAT), times = nrow(DF1)),
LON = mean(mod_df_cnideriazoop$LON), #rep(mean(scale_dat$LON), times = nrow(DF1)),
DOY = mean(mod_df_cnideriazoop$DOY)))
temp <- predict(cnideria_zoop_index, cnideria_pred_df, se.fit = TRUE, response = TRUE)
cnideria_pred_df$pred <- exp(temp[[1]])
cnideria_pred_df$se <- (temp[[2]])
cnideria_pred_df <- cnideria_pred_df %>%
dplyr::mutate(id = "Cnideria")
add <-  data.frame(YEAR = c(as.factor(2023)),
Large_zoop = c(2.5),
Cnideria = c(10.4))
# plot cnideria ==================
ggplot(data = cnideria_pred_df, aes(x=as.numeric(as.character(YEAR)), y = pred,
group =DATA_SOURCE, color =DATA_SOURCE)) +
geom_point()+
geom_line() +
geom_errorbar(aes(ymin = pred-se, ymax = pred+se), width = 0.1)  +
ylab("Log Cnideria Modeled Index") +
ggtitle("NBS Middle Shelf") +
xlab("year") +
theme_classic()
ggsave("output/cnideria_index_middle_shelf.png")
library(here)
library(tidyverse)
asl_dat <-read.csv("data/ASL_summary_byFWSWage.csv")
View(asl_dat)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon", "Kuskokwim"))
View(chum_tidy)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon"))
unique(chum_tidy$LocationID)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon")) %>%
dplyr::mutate(stock_group = case_when(
LocationID %in% upper ~ "fall_chum_yukon",
LocationID %in% middle ~ "fall_chum_yukon",
LocationID %in% lower ~ "summer_chum_yukon",
Lon > -141 ~ "fall_chum_yukon",
Lat <= 63 ~ "summer_chum_yukon",
Lat > 63 ~ "fall_chum_yukon",
TRUE ~ "NA"))
upper <- c("Dawson (Village/City)","Yukon Crossing, Y.T., Canada (Village/City)","Bearfeed Creek","Big Salmon River",
"Blind Creek" )
middle <-c( "Anvik Bluff", "Anvik River","Fairbanks (Village/City)","Galena (Village/City)",
"Manley (Village/City)", "Nenana (Village/City)","Nulato (Village/City)","Rampart (Village/City)",
"Rampart Rapids", "Ruby (Village/City)", "Stevens Village (Village/City)","Tanana (Village/City)",
"Y4 (Subdistrict 4)", "Y5 (Subdistrict 5)","Y6 (Subdistrict 6)","Beaver (Village/City)","Chatanika (Village/City)",
"Chena River","Chulitna River","Clear (Village/City)", "Gisasa River", "Goodpaster River", "Henshaw Creek","Kaltag (Village/City)"
)
lower <-c("Alakanuk (Village/City)", "Big Eddy", "Emmonak (Village/City)","Flat Island","Grayling (Village/City)",
"Halfway Island","Kotlik (Village/City)", "Marshall (Village/City)","Mountain Village (Village/City)",
"Ohogamiut (Village/City)","Pilot Station (Village/City)", "St Marys (Village/City)","Y1 (Subdistrict 1)",
"Y2 (Subdistrict 2)","Y3 (Subdistrict 3)","Andreafsky River", "Andreafsky River (East Fork)", "Ingersoll Islands"
)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon")) %>%
dplyr::mutate(stock_group = case_when(
LocationID %in% upper ~ "fall_chum_yukon",
LocationID %in% middle ~ "fall_chum_yukon",
LocationID %in% lower ~ "summer_chum_yukon",
Lon > -141 ~ "fall_chum_yukon",
Lat <= 63 ~ "summer_chum_yukon",
Lat > 63 ~ "fall_chum_yukon",
TRUE ~ "NA"))
View(chum_tidy)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon")) %>%
dplyr::mutate(location_group = case_when(
LocationID %in% upper ~ "upper",
LocationID %in% middle ~ "middle",
LocationID %in% lower ~ "lower",
TRUE ~ "check"))
View(chum_tidy)
chum_tidy <- asl_dat %>%
filter(Species == "chum",
# ASLProjectType %in% c("commercial catch", "escapement"),
SASAP.Region %in% c("Yukon")) %>%
dplyr::mutate(location_group = case_when(
LocationID %in% upper ~ "upper",
LocationID %in% middle ~ "middle",
LocationID %in% lower ~ "lower",
TRUE ~ "check"))
View(chum_tidy)
ggplot(data = chum_tidy) +
geom_point(aes(x=sampleYear, y = mean, color = LocationID)) +
facet_wrap(~location_group)
ggplot(data = chum_tidy) +
geom_point(aes(x=sampleYear, y = mean, color = LocationID)) +
facet_wrap(~location_group) +
scale_color_viridis(guide = FALSE)
library(viridis)
ggplot(data = chum_tidy) +
geom_point(aes(x=sampleYear, y = mean, color = LocationID)) +
facet_wrap(~location_group) +
scale_color_viridis(guide = FALSE)
ggplot(data = chum_tidy) +
geom_point(aes(x=sampleYear, y = mean, color = LocationID)) +
facet_wrap(~location_group) +
scale_color_viridis(guide = FALSE, discrete = TRUE)
TEST <- chum_tidy %>%
filter(location_group == "check")
View(TEST)
unique(TEST$LocationID)
unique(TEST$ASLProjectType)
pollock <- read_csv("data/Covariate_B_pollock_recruitment.xlsx") # daily mean temp for NBS and SEBS since 1985!
View(pollock)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") # daily mean temp for NBS and SEBS since 1985!
View(pollock)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") %>%
dplyr::mutate(recruit_scale = as.numeric(scale(Recruit_age_1_millions)))
View(pollock)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") %>%
dplyr::mutate(recruit_scale = as.numeric(scale(Recruit_age_1_millions))) %>%
dplyr::rename(year = Year)
ggplot(data = pollock) +
geom_point(aes(x=year, y = recruit_scale)) +
geom_line(aes(x=year, y = recruit_scale)) +
theme_classic() +
geom_hline(yintercept = 0, linetype =2) +
ylab("NBS Cumulative Degree Days") +
xlab("Year")
ggplot(data = pollock) +
geom_point(aes(x=year, y = recruit_scale)) +
geom_line(aes(x=year, y = recruit_scale)) +
theme_classic() +
geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
# Bring in all covariates into one big dataset and plot all covariates in one plot
library(tidyverse)
library(here)
# years in covariate timeseries to expand the TS that need it
YEAR <-data.frame(YEAR = seq(from = 2002, to = 2022, by =1))
# Stage A - Load data =============
sst_a <- read_csv("data/processed_covariates/Stage_A_CDD.csv") %>%
dplyr::rename(SST_CDD_NBS = "CDD",
Year = "year")
# this is a GAM zoop index
zoop <- read_csv("data/processed_covariates/Stage_A_Zooplankton_Index.csv")  %>%
dplyr::rename(Year = "YEAR")
river_discharge_a <- read_csv("data/processed_covariates/Stage_A_YK_Discharge.csv") %>%
dplyr::select(Year, mean_discharge,id) %>%
spread(id, mean_discharge) %>%
dplyr::rename(kusko_mean_discharge = "Kusko",
yukon_mean_discharge = "Yukon") %>%
dplyr::mutate(Year = Year+1) %>% # already brood year, this will line up when i subtract 1 year from all covariate years
dplyr::select(Year, yukon_mean_discharge)
air_temp_a <- read_csv("data/processed_covariates/Stage_A_airtemp.csv") %>%
filter(type =="average", id == "spring") %>%
dplyr::rename(mean_air_temp = "value") %>%
dplyr::select(Year, mean_air_temp,site) %>%
spread(site,mean_air_temp) %>%
dplyr::rename(kusko_aniak_mean_airtemp = "aniak",
yukon_chena_mean_airtemp = "chena")
View(river_discharge_a)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") %>%
dplyr::mutate(recruit_scale = as.numeric(scale(Recruit_age_1_millions)))
ggplot(data = pollock) +
geom_point(aes(x=Year, y = recruit_scale)) +
geom_line(aes(x=Year, y = recruit_scale)) +
theme_classic() +
geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
ggplot(data = pollock ) +
geom_point(aes(x=Year, y = Recruit_age_1_millions)) +
geom_line(aes(x=Year, y = Recruit_age_1_millions)) +
theme_classic() +
# geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
# Source:  Pollock stock assessment, table 26 -- https://apps-afsc.fisheries.noaa.gov/Plan_Team/2023/EBSPollock.pdf
library(here)
library(tidyverse)
library(readxl)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") %>%
dplyr::mutate(recruit_scale = as.numeric(scale(Recruit_age_1_millions)))
ggplot(data = pollock) +
geom_point(aes(x=Year, y = recruit_scale)) +
geom_line(aes(x=Year, y = recruit_scale)) +
theme_classic() +
geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
ggplot(data = pollock ) +
geom_point(aes(x=Year, y = Recruit_age_1_millions)) +
geom_line(aes(x=Year, y = Recruit_age_1_millions)) +
theme_classic() +
# geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
write_csv(pollock,"data/processed_covariates/Stage_A_Pollock_Recruitment.csv")
pollock <- read_csv("data/processed_covariates/Stage_A_Pollock_Recruitment.csv") %>%
dplyr::select(Year, recruit_scale)
# Stage A - One DF for model =============
stage_a_cov<- left_join(river_discharge_a,sst_a)  %>%
left_join(air_temp_a) %>%
left_join(zoop)  %>%
left_join(pollock) %>%
data.frame()
View(stage_a_cov)
pollock <- readxl::read_xlsx("data/Covariate_B_pollock_recruitment.xlsx") %>%
dplyr::mutate(pollock_recruit_scale = as.numeric(scale(Recruit_age_1_millions)))
ggplot(data = pollock) +
geom_point(aes(x=Year, y = pollock_recruit_scale)) +
geom_line(aes(x=Year, y = pollock_recruit_scale)) +
theme_classic() +
geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
ggplot(data = pollock ) +
geom_point(aes(x=Year, y = Recruit_age_1_millions)) +
geom_line(aes(x=Year, y = Recruit_age_1_millions)) +
theme_classic() +
# geom_hline(yintercept = 0, linetype =2) +
ylab("Pollock Recruitment") +
xlab("Year")
write_csv(pollock,"data/processed_covariates/Stage_A_Pollock_Recruitment.csv")
pollock <- read_csv("data/processed_covariates/Stage_A_Pollock_Recruitment.csv") %>%
dplyr::select(Year, pollock_recruit_scale)
# Stage A - One DF for model =============
stage_a_cov<- left_join(river_discharge_a,sst_a)  %>%
left_join(air_temp_a) %>%
left_join(zoop)  %>%
left_join(pollock) %>%
data.frame()
# Stage A - Save DF =============
write_csv(stage_a_cov, "data/processed_covariates/stage_a_all.csv")
asl_dat <-read.csv("data/ASL_summary_byFWSWage.csv")
asl_dat <-read.csv("data/ASL_summary_byFWSWage.csv") %>%
filter(ASLProjectType %in% c("escapement"))
unique(asl_dat$LocationID)
View(air_temp_a)
View(asl_dat)
asl_dat <-read.csv("data/ASL_summary_byFWSWage.csv") %>%
filter(ASLProjectType %in% c("escapement"),
Species == "chum",
SASAP.Region %in% c("Yukon"))
unique(asl_dat$LocationID)
t <-data.frame(unique(asl_dat$LocationID))
View(t)
